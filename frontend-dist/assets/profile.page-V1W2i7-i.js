import{j as e,r as n}from"./markdown-Qw4Jt3t5.js";import{h as ye}from"./moment-WSJ9un1t.js";import{u as a,m as _,af as S,d as O,E as ee,B as f,j as te,ad as Le,ak as Be,al as Fe,am as Ne,C as ae,K as Pe,an as We,e as ke,i as Se,ao as Oe,ap as Te,aq as Re,p as Ye,h as m,ar as Me,as as Ve,at as ze,S as Qe,l as De,ac as Xe,N as He,a6 as Ze,au as H,s as Z,y as K}from"./index-2Mm0dNtt.js";import{c as Ke}from"./coverImageCamera-M_j72FHK.js";import{M as G}from"./modal.component-cjgN5hw1.js";import{u as Ge,O as qe}from"./uploadImage.hook-2i8OurMw.js";import{U as q}from"./user-item.component-QQKWlYGU.js";import{W as Je}from"./wide-article-item.component-_L6y3M4S.js";import{d as $e}from"./default-group-image-3LT9wWmd.js";import"./calendar-TeNl4l8Y.js";import"./index.esm-VMS9YxoW.js";import"./profileUrlBuilder-lYjeV696.js";const _e="data:image/png;base64,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",et=a(_.div)`
    position: relative;
    width: min(400px, 100%);
    gap: 1.25rem;
    margin: 0 auto;
    display: flex;
    align-items: center;
    padding: 1.25rem;
    border-radius: 10px;
    background-color: white;
    box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
    transition: all 0.25s ease-in-out;
    cursor: pointer;
    &:hover {
        background-color: var(--indigo-25);
    }
`,tt=a(ee)`
    max-width: 100px;
    border-radius: 50%;
    object-fit: cover;
    aspect-ratio: 1/1;
`,at=a.div`
    display: flex;
    flex: 1;
    gap: 0.5rem;
    height: 100%;
    flex-direction: column;
    align-content: flex-start;
`,it=a.div`
    position: absolute;
    top: -0.5rem;
    right: -0.5rem;
    padding: 0.5rem;
    border-radius: 50%;
    ${({role:d})=>{switch(d){case"owner":return S`
                    background-color: #fab005;
                `;case"admin":return S`
                    background-color: #74c0fc;
                `;case"member":case void 0:return S`
                    background-color: #68d391;
                `}}}
`,ot=a.h3`
    ${O}
    margin-left: 0.25rem;
    font-weight: bold;
    font-size: 1.25rem;
`,st=a.div`
    display: flex;
    gap: 0.5rem;
`;a.div`
    display: flex;
    flex-direction: column;
    justify-content: center;
    height: 100%;
`;a(f)`
    white-space: nowrap;
    transition: all 0.25s ease-in-out;
    font-size: 0.875rem;
    @media (max-width: 568px) {
        font-size: 0.75rem;
    }
`;const nt=({ID:d,GroupTitle:g,GroupCoverImage:E,GroupTags:p,GroupMembers:s,UserRole:r})=>{const j=te();let u=e.jsx(Be,{});switch(r){case"owner":u=e.jsx(Ne,{});break;case"admin":u=e.jsx(Fe,{});break}return e.jsxs(et,{onClick:()=>{j(`/app/groups/${d}`)},children:[e.jsx(tt,{src:E||$e,alt:g}),e.jsxs(at,{role:r,children:[e.jsx(ot,{title:g,lines:1,children:g}),e.jsxs("p",{className:"text-xs ml-1",children:[(s==null?void 0:s.length)??0," Members"]}),e.jsx(st,{children:p==null?void 0:p.slice(0,2).map(x=>e.jsx(Le,{text:x,size:"xs"},x))})]}),e.jsx(it,{role:r,title:r,children:u})]})},A="",C="var(--indigo-50)",w="1rem",rt=a(_.div)`
    width: 100%;
    max-width: 1920px;
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
    margin: 0 auto;
    margin-bottom: 1.25rem;
`,lt=a.header`
    max-width: 1366px;
    margin: 0 auto;
    width: 100%;
    background-color: ${C};
    position: relative;
    border-radius: ${w};
    box-shadow: ${A};
`,dt=a.div`
    position: relative;
    width: 100%;
`,ct=a(ee)`
    width: 100%;
    height: auto;
    min-height: 200px;
    aspect-ratio: 5/1;
    object-fit: cover;
    border: none;
    z-index: 0;
`,mt=a.div`
    position: absolute;
    bottom: 72.5%;
    width: 175px;
    height: 175px;
    @media (max-width: 768px) {
        width: 150px;
        height: 150px;
    }
`,ie=a.img`
    aspect-ratio: 1/1;
    object-fit: cover;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    outline: 0.35rem solid var(--indigo-50);
    outline-offset: -1px;
`,J=a(ie)`
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    position: absolute;
    transition: opacity 0.3s ease-in-out;
    z-index: 1;
    &:hover {
        opacity: 0.1;
        cursor: pointer;
    }
`,ht=a.div`
    display: flex;
    align-items: center;
    position: relative;
    padding: 2.5rem 4rem 1rem 4rem;
    gap: 1.5rem;
    background-color: ${C};
    border-radius: ${w};
    box-shadow: ${A};

    @media (max-width: 768px) {
        padding: 2.5rem 2rem 1rem 2rem;
        gap: 1rem;
    }
    @media (max-width: 500px) {
        padding: 2.5rem 1rem 1rem 1rem;
        gap: 0.5rem;
    }
`,gt=a.h2`
    line-height: 1.25;
    font-weight: 900;
    font-size: 2rem;
    ${ae}
`,pt=a.h3`
    font-weight: 500;
    font-size: 1.25rem;
    line-height: 1.25;
    ${O}
    max-width: 90vw;
`,ut=a.p`
    margin-top: -0.25rem;
    opacity: 0.75;
    font-size: 1rem;
`,xt=a.a`
    cursor: pointer;
    color: var(--indigo-700);
    border-bottom: 1px solid transparent;
    align-self: flex-start;
    transition: all 0.2s ease-in-out;
    line-height: 1.1;

    &:hover {
        color: var(--indigo-900);
        border-bottom-color: var(--indigo-900);
    }
`,ft=a.main`
    width: 100%;
    max-width: 1366px;
    display: grid;
    grid-template-columns: minmax(0, 3fr) minmax(0, 1fr);
    grid-auto-rows: auto;
    align-items: start;
    gap: 1.25rem;
    padding: 0 1.25rem;
    margin: 0 auto;

    @media (max-width: 768px) {
        grid-template-columns: minmax(0, 1fr);
    }
`,At=a.section`
    box-shadow: ${A};
    width: 100%;
    grid-column: 1;
    background-color: ${C};
    border-radius: ${w};
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;

    @media (max-width: 768px) {
        grid-row: 1;
    }
`,Ct=a.pre`
    white-space: break-spaces;
    font-size: 0.9rem;
    font-family: inherit;
    ${O}
    max-width: 750px;
`,wt=a.ul`
    display: flex;
    flex-direction: column;
`,jt=a.li`
    list-style: none;
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;

    &:not(last-child) {
        border-bottom: 1px solid var(--indigo-100);
    }
`,It=a.p`
    ${ae}
`,bt=a.section`
    grid-column: 1;
    width: 100%;
    background-color: ${C};
    box-shadow: ${A};
    border-radius: ${w};
    padding: 1.5rem;
    padding-top: 0.5rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    @media (max-width: 768px) {
        grid-row: 3;
    }
`,vt=a.header`
    display: flex;
    align-items: center;
    overflow-x: auto;
    gap: 1rem;
    margin-bottom: 1rem;
`,Et=a.button`
    padding: 0.5rem 1rem;
    transition: all 0.2s ease-in-out;
    border-bottom: ${d=>d.isActive?"3px solid var(--indigo-700)":"3px solid transparent"};
    color: ${d=>d.isActive?"var(--indigo-700)":"var(--gray-800)"};
    font-weight: 700;
    &:hover {
        cursor: pointer;
        opacity: 1;
        backdrop-filter: brightness(0.95);
    }
`,Ut=a.div`
    width: min(800px, 100%);
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    flex: 1;
`,yt=a.div`
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 1rem;
`,Lt=a.div`
    font-size: 1.5rem;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 300px;
    opacity: 0.5;
`,$=a.section`
    box-shadow: ${A};
    background-color: ${C};
    grid-column: 2;
    grid-row: 1/3;
    width: 100%;
    border-radius: ${w};
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;

    @media (max-width: 768px) {
        grid-column: 1;
        grid-row: 2;
    }
`,Vt=()=>{var X;const d=te(),g=Pe(),E=We(),{token:p,user:s}=ke(t=>t.auth),r=window.location.pathname.includes("/user/"),j=Se().username,{isLoading:u,trigger:x}=Ge(),[oe,{data:I,isLoading:se}]=Oe(),[T,{isLoading:ne}]=Te(),{data:b}=Re(),{data:v}=Ye(),re=(b==null?void 0:b.data)??[],le=(v==null?void 0:v.data)??[],U=((X=I==null?void 0:I.data)==null?void 0:X.user)??{},[y,R]=n.useState(s.ProfileImage),[L,Y]=n.useState(s.CoverImage),[de,B]=n.useState(!1),[ce,F]=n.useState(!1),[me,M]=n.useState(!1),[o,V]=n.useState({}),[N,z]=n.useState([]),[P,Q]=n.useState([]),[W,he]=n.useState([{title:"Posts",isActive:!1,label:"posts"},{title:"Groups",isActive:!0,label:"groups"},{title:"Followers",isActive:!1,label:"followers"},{title:"Following",isActive:!1,label:"following"}]),[ge]=n.useState([{FullName:"Ahmed Mohamed Mohamed",Username:"ahmedali",ProfileImage:m},{FullName:"Ahmed",Username:"ahmedali",ProfileImage:m},{FullName:"Ahmed",Username:"ahmedali",ProfileImage:m},{FullName:"Ahmed",Username:"ahmedali",ProfileImage:m}]),[pe]=n.useState([{FullName:"Ahmed",Username:"ahmedali",ProfileImage:m},{FullName:"Ahmed",Username:"ahmedali",ProfileImage:m},{FullName:"Ahmed",Username:"ahmedali",ProfileImage:m},{FullName:"Ahmed",Username:"ahmedali",ProfileImage:m}]);let k=N==null?void 0:N.map(t=>{var l,c,h;if(((l=t==null?void 0:t.GroupOwner)==null?void 0:l.ID)===o.ID)return{...t,UserRole:"owner"};const i=(h=(c=t==null?void 0:t.GroupMembers)==null?void 0:c.find(Ue=>Ue.ID===o.ID))==null?void 0:h.Type;return{...t,UserRole:(i==null?void 0:i.toLocaleLowerCase())??"member"}});const ue=[{icon:e.jsx(Me,{}),text:o.Email},{icon:e.jsx(Ve,{}),text:o.PhoneNumber},{icon:e.jsx(ze,{title:"Birthday"}),text:ye(new Date((o==null?void 0:o.DOB)||Date.now())).format("MMMM Do YYYY")}];n.useEffect(()=>{R(s.ProfileImage),Y(s.CoverImage)},[s.ProfileImage,s.CoverImage]),n.useEffect(()=>{r?(V(U),z(U.GroupsJoined),Q(U.Articles)):(V(s),z(le),Q(re))},[I,b,v,E]),n.useEffect(()=>{r&&j&&oe(j)},[]);const xe=()=>W.map(t=>t.isActive?t.title==="Posts"?e.jsx(e.Fragment,{children:P==null?void 0:P.map(i=>e.jsx(Je,{...i,onClick:()=>d(`/app/articles/${i.ID}`)}))}):t.title==="Groups"?e.jsx(yt,{children:k==null?void 0:k.map(i=>e.jsx(nt,{...i}))}):e.jsx(Lt,{children:"Nothing here."}):null),fe=t=>{he(W.map((i,l)=>l===t?{...i,isActive:!0}:{...i,isActive:!1}))},Ae=async()=>{var t;try{const i={};if((s==null?void 0:s.ProfileImage)!==y){const l=await x(y);i.image=l;const{data:{updatedUser:c}}=await T(i).unwrap();g(H({user:c,token:p})),Z("Image uploaded successfully")}if((s==null?void 0:s.CoverImage)!==L){const l=await x(L);i.coverImage=l;const{data:{updatedUser:c}}=await T(i).unwrap();g(H({user:c,token:p})),Z("Image uploaded successfully")}F(!1),B(!1)}catch(i){((t=i.response)==null?void 0:t.status)===401?K("Unauthorized. Please log in again."):K("Error occurred while updating the image!")}},Ce=()=>{F(t=>!t)},we=()=>{B(t=>!t)},D=({isOpen:t,setIsOpen:i,image:l,setImage:c,title:h})=>e.jsxs(G,{className:"items-center",isOpen:t,setIsOpen:i,title:`Edit ${h} Image`,width:"lg",children:[e.jsx(qe,{height:"250px",width:h==="Cover"?"450px":"250px",value:l,onChange:c,radius:h==="Cover"?"5px":"50%",cover:h==="Cover"?"contain":"cover"}),e.jsxs("div",{className:"flex flex-row-reverse gap-4 w-full mt-4",children:[e.jsx(f,{select:"primary",loading:u||ne,onClick:Ae,children:"Apply"}),e.jsx(f,{select:"danger",onClick:()=>{c(h==="Cover"?s.CoverImage:s.ProfileImage),i(!1)},outline:!0,children:"Cancel"})]})]}),je=e.jsx(G,{isOpen:me,setIsOpen:M,title:o.FullName,children:e.jsx(wt,{children:ue.map(({icon:t,text:i})=>e.jsxs(jt,{children:[t,e.jsx(It,{title:i,children:i})]}))})}),Ie=e.jsxs($,{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"You may know"}),e.jsx("hr",{}),e.jsx("ul",{children:ge.map(t=>e.jsx(q,{...t,action:"follow"}))})]}),be=e.jsxs($,{children:[e.jsx("h1",{className:"text-xl font-semibold text-[var(--gray-700)]",children:"Mutual Followers"}),e.jsx("hr",{}),e.jsx("ul",{children:pe.map(t=>e.jsx(q,{...t}))})]}),ve=e.jsx(f,{select:"warning",title:"Edit profile",className:"ml-auto gap-2 !p-4 !text-inherit self-start",rounded:!0,onClick:()=>d("/app/settings"),children:e.jsx(He,{size:18})}),Ee=e.jsxs(f,{select:"primary",title:"Follow",className:"ml-auto gap-2 self-start",children:[e.jsx(Ze,{size:14})," Follow"]});return r&&se?e.jsx(Qe,{}):e.jsxs(rt,{...De,children:[e.jsxs(lt,{children:[e.jsxs(dt,{children:[e.jsx(J,{src:Ke,title:"Edit cover image",className:`!rounded-none ${r&&"hidden"}`,onClick:we}),e.jsx(ct,{src:(o==null?void 0:o.CoverImage)??"https://cdn11.bigcommerce.com/s-9uf88xhege/images/stencil/1280x1280/products/1162/50750/montana-cans-montana-black-dark-indigo__66994.1657052664.jpg?c=1?imbypass=on",alt:""})]}),e.jsxs(ht,{children:[e.jsxs(mt,{children:[e.jsx(ie,{src:(o==null?void 0:o.ProfileImage)??m}),e.jsx(J,{src:_e,title:"Edit profile picture",onClick:Ce,className:`${r&&"hidden"}`})]}),e.jsxs("div",{className:"flex flex-col justify-between overflow-hidden",children:[e.jsx(gt,{title:o.FullName,children:o.FullName}),e.jsxs("div",{className:"flex",children:[e.jsxs(ut,{title:o.Username,children:["@",o.Username]}),e.jsx(Xe,{}),e.jsx(xt,{onClick:()=>M(!0),children:"Contact Info"})]}),e.jsx(pt,{title:o.Headline,lines:2,children:o.Headline})]}),r?Ee:ve]})]}),e.jsxs(ft,{children:[e.jsxs(At,{children:[e.jsx("h1",{className:"text-xl font-bold",children:"About"}),e.jsx("hr",{}),e.jsx(Ct,{lines:5,children:o.Bio??"This user has no bio."})]}),e.jsxs(bt,{children:[e.jsx(vt,{children:W.map(({title:t,isActive:i},l)=>e.jsx(Et,{isActive:i,onClick:()=>{fe(l)},children:t}))}),e.jsx(Ut,{children:xe()})]}),r?be:Ie]}),je,e.jsx(D,{isOpen:ce,setIsOpen:F,image:y,setImage:R,title:"Profile"}),e.jsx(D,{isOpen:de,setIsOpen:B,image:L,setImage:Y,title:"Cover"})]})};export{Vt as default};
